<html>
	<body>
		<p>This example stores a text in the pixels of an picture.</p>
		<textarea id="text">hello world</textarea><br/>
		<input type="button" value="compress" onclick="texttoimage(text.value)"></input><br/><br/>
		<canvas id="canvas" width=1 height=1 style="border: 1px solid black " ></canvas>
		<script>	
			function texttoimage(text){			
				var ca = document.getElementById("canvas");
				var ctx = ca.getContext("2d");
				ca.width = text.length/3 + text.length%3;
			
				for(i = 0 ; i < text.length; i= i + 3 ){
				
				  a = text.charCodeAt(i)
				  b =   ((i + 1 )>= text.length)? 255 : text.charCodeAt(i + 1);
				  c =   ((i + 2 )>= text.length)? 255 : text.charCodeAt(i + 2);
				  
				  ctx.fillStyle = "rgb("+a+","+b+","+c+")";
				  ctx.fillRect(((i> 0)?i/3:i), 0, 1, 1);
				}
			}
			texttoimage(text.value);			
		</script>
	</body>
</html>